      - name: Test multi-version capability
        run: |
          echo "--- Testing Multi-Version TensorFlow Capability ---"
          mkdir -p /tmp/omnipkg-artifacts
          
          # Test the multi-version capability directly
          timeout 600 python - << 'OMNIPKG_TEST_EOF' 2>&1 | tee /tmp/omnipkg-artifacts/tensorflow_test_output.txt
          import sys
          import subprocess
          
          print("=== Installing TensorFlow 2.12.0 for testing ===")
          try:
              subprocess.run([sys.executable, "-m", "pip", "install", "tensorflow==2.12.0", "--target", "/tmp/tf_2_12_0", "--no-deps", "--force-reinstall"], check=True)
              print("✅ TensorFlow 2.12.0 installed successfully")
          except subprocess.CalledProcessError as e:
              print(f"❌ Failed to install TensorFlow 2.12.0: {e}")
              sys.exit(1)
          
          print("\n=== Testing omnipkg multi-version loading ===")
          try:
              from omnipkg.loader import omnipkgLoader
              from omnipkg.core import ConfigManager
              
              config = ConfigManager().config
              print(f"✅ omnipkg config loaded: {config}")
              
              # Test accessing older version
              print("\n--- Testing isolated TensorFlow 2.12.0 ---")
              with omnipkgLoader('tensorflow==2.12.0', config=config):
                  import tensorflow as tf_old
                  print(f'✅ Isolated TensorFlow version: {tf_old.__version__}')
              
              # Main environment version
              print("\n--- Testing main environment TensorFlow ---")
              import tensorflow as tf_main
              print(f'✅ Main environment TensorFlow version: {tf_main.__version__}')
              
              if tf_old.__version__ != tf_main.__version__:
                  print('🎉 SUCCESS: Both TensorFlow versions accessible in same environment!')
                  print('OMNIPKG MULTI-VERSION TEST PASSED!')
              else:
                  print('❌ FAILED: Versions are the same, no isolation occurred')
                  sys.exit(1)
                  
          except Exception as e:
              print(f"❌ omnipkg test failed: {e}")
              import traceback
              traceback.print_exc()
              sys.exit(1)
          OMNIPKG_TEST_EOF
          
          TEST_EXIT_CODE=${PIPESTATUS[0]}
          
          echo "## TensorFlow Multi-Version Test Output" >> $GITHUB_STEP_SUMMARY
          echo '```' >> $GITHUB_STEP_SUMMARY
          cat /tmp/omnipkg-artifacts/tensorflow_test_output.txt >> $GITHUB_STEP_SUMMARY
          echo '```' >> $GITHUB_STEP_SUMMARY
          
          if [ $TEST_EXIT_CODE -eq 0 ] && grep -q "OMNIPKG MULTI-VERSION TEST PASSED!" /tmp/omnipkg-artifacts/tensorflow_test_output.txt; then
            echo "✅ Multi-version test completed successfully"
            echo "OMNIPKG_TENSORFLOW=SUCCESS" >> $GITHUB_ENV
          else
            echo "❌ Multi-version test failed"
            echo "OMNIPKG_TENSORFLOW=FAILED" >> $GITHUB_ENV
